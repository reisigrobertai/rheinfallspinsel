<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="title" content="Das ultimative Glücksrad-Spektakel">
    <meta name="description" content="Ein interaktives Glücksrad-Spiel mit modernem Design">
    <link rel="icon" type="image/svg" href="/LogoPlainSVG.svg">
    <title>Rheinfallspinsel - Glücksrad Deluxe</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --accent-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --gold-gradient: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            --neon-cyan: #00ffff;
            --neon-magenta: #ff00ff;
            --neon-yellow: #ffff00;
            --dark-bg: #0a0a0a;
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            min-height: 100vh;
            background: var(--dark-bg);
            color: white;
            overflow-x: hidden;
            position: relative;
        }

        /* Animated Background */
        .background-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            overflow: hidden;
        }

        .gradient-bg {
            position: absolute;
            width: 200%;
            height: 200%;
            top: -50%;
            left: -50%;
            background: radial-gradient(ellipse at center, #1a1a2e 0%, #0a0a0a 50%);
            animation: rotateGradient 20s ease infinite;
        }

        @keyframes rotateGradient {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.2); }
            100% { transform: rotate(360deg) scale(1); }
        }

        /* Particle System */
        .particles {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--neon-cyan);
            border-radius: 50%;
            filter: blur(1px);
            animation: floatParticle linear infinite;
            box-shadow: 0 0 10px var(--neon-cyan);
        }

        @keyframes floatParticle {
            from {
                transform: translateY(100vh) translateX(0);
                opacity: 0;
            }
            10% { opacity: 1; }
            90% { opacity: 1; }
            to {
                transform: translateY(-100vh) translateX(100px);
                opacity: 0;
            }
        }

        /* Neon Grid */
        .neon-grid {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 255, 255, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 255, 0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: gridMove 10s linear infinite;
        }

        @keyframes gridMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        /* Main Container */
        .main-container {
            position: relative;
            z-index: 10;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        /* Title */
        .title {
            font-size: clamp(1.8rem, 5vw, 3.5rem);
            font-weight: 900;
            text-align: center;
            margin-bottom: 2rem;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 30px rgba(102, 126, 234, 0.5);
            animation: titleGlow 3s ease-in-out infinite;
            position: relative;
        }

        @keyframes titleGlow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.2); }
        }

        .title::after {
            content: 'GLÜCKSRAD DELUXE';
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: var(--secondary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            z-index: -1;
            animation: titleShift 4s ease-in-out infinite;
        }

        @keyframes titleShift {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(3px, 3px); }
        }

        /* Wheel Container */
        .wheels-container {
            display: flex;
            gap: 3rem;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 2rem;
        }

        /* Individual Wheel */
        .wheel-wrapper {
            position: relative;
            width: 240px;
            height: 240px;
            perspective: 1000px;
        }

        .wheel {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            cursor: pointer;
        }

        .wheel:hover {
            transform: rotateY(15deg) rotateX(-10deg) scale(1.05);
        }

        .wheel-face {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
            backdrop-filter: blur(10px);
            background: var(--glass-bg);
            border: 2px solid var(--glass-border);
            box-shadow: 
                0 0 40px rgba(0, 255, 255, 0.5),
                inset 0 0 40px rgba(255, 255, 255, 0.1);
            overflow: hidden;
        }

        .wheel-face::before {
            content: '';
            position: absolute;
            width: 150%;
            height: 150%;
            background: conic-gradient(
                from 0deg,
                transparent,
                var(--neon-cyan),
                transparent,
                var(--neon-magenta),
                transparent
            );
            animation: wheelSpin 4s linear infinite;
            opacity: 0.3;
        }

        @keyframes wheelSpin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .wheel-face::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(
                circle at 30% 30%,
                rgba(255, 255, 255, 0.3),
                transparent 50%
            );
            border-radius: 50%;
        }

        .wheel-content {
            position: relative;
            z-index: 1;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 2px;
            padding: 10px;
            width: 90%;
        }

        .wheel-label {
            font-size: 0.8rem;
            opacity: 0.7;
            margin-bottom: 0.5rem;
        }

        .wheel-value {
            font-size: 1.8rem;
            text-shadow: 0 0 20px currentColor;
            word-break: break-word;
            line-height: 1.2;
            max-width: 100%;
        }

        #numberWheel .wheel-face {
            background: linear-gradient(135deg, rgba(255, 0, 0, 0.1), rgba(255, 100, 0, 0.1));
            border-color: rgba(255, 0, 0, 0.3);
            color: #ff6b6b;
        }

        #nameWheel .wheel-face {
            background: linear-gradient(135deg, rgba(0, 123, 255, 0.1), rgba(0, 200, 255, 0.1));
            border-color: rgba(0, 123, 255, 0.3);
            color: #4dabf7;
        }

        /* Spinning Animation */
        .wheel.spinning .wheel-face {
            animation: superSpin 0.1s linear infinite;
        }

        @keyframes superSpin {
            0% { transform: rotateZ(0deg); }
            100% { transform: rotateZ(360deg); }
        }

        /* Control Panel */
        .control-panel {
            display: flex;
            gap: 2rem;
            margin-bottom: 1rem;
        }

        .spin-button {
            padding: 0.8rem 2.5rem;
            font-size: 1.1rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            background: var(--accent-gradient);
            border: none;
            border-radius: 50px;
            color: white;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(79, 172, 254, 0.4);
        }

        .spin-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(79, 172, 254, 0.6);
        }

        .spin-button:active {
            transform: translateY(0);
        }

        .spin-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .spin-button:active::before {
            width: 300px;
            height: 300px;
        }

        .spin-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Result Display */
        .result-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            padding: 20px;
        }

        .result-overlay.active {
            display: flex;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .result-content {
            text-align: center;
            animation: resultBounce 0.6s ease;
            max-width: 90vw;
        }

        @keyframes resultBounce {
            0% { transform: scale(0) rotate(180deg); }
            50% { transform: scale(1.2) rotate(90deg); }
            100% { transform: scale(1) rotate(0deg); }
        }

        .result-title {
            font-size: clamp(2.5rem, 7vw, 5rem);
            font-weight: 900;
            background: var(--gold-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1.5rem;
            animation: resultGlow 1s ease infinite alternate;
        }

        @keyframes resultGlow {
            from { filter: brightness(1) drop-shadow(0 0 20px gold); }
            to { filter: brightness(1.3) drop-shadow(0 0 40px gold); }
        }

        .result-details {
            font-size: clamp(1.2rem, 3.5vw, 2rem);
            margin-bottom: 1rem;
            color: white;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
            line-height: 1.4;
            word-wrap: break-word;
            padding: 0 20px;
        }

        .result-name {
            display: block;
            margin-bottom: 0.5rem;
            font-size: clamp(1.4rem, 4vw, 2.3rem);
            color: var(--neon-cyan);
        }

        .result-strokes {
            display: block;
            font-size: clamp(1.1rem, 3vw, 1.8rem);
            color: var(--neon-magenta);
        }

        .result-phrase {
            font-size: clamp(0.9rem, 2.2vw, 1.3rem);
            font-style: italic;
            opacity: 0.8;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
            padding: 0 20px;
        }

        /* Confetti */
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1001;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: var(--neon-cyan);
            animation: confettiFall 3s ease-out forwards;
        }

        @keyframes confettiFall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* Audio Controls */
        .audio-controls {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 100;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            padding: 0.5rem 1rem;
            border-radius: 25px;
            border: 1px solid var(--glass-border);
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .audio-controls:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .audio-icon {
            width: 24px;
            height: 24px;
            position: relative;
        }

        .audio-icon::before {
            content: '🔊';
            font-size: 20px;
        }

        .audio-controls.muted .audio-icon::before {
            content: '🔇';
        }

        /* Mobile Optimizations */
        @media (max-width: 768px) {
            .main-container {
                padding: 15px;
                justify-content: flex-start;
                padding-top: 60px;
            }

            .title {
                margin-bottom: 1.5rem;
            }

            .wheels-container {
                gap: 1.5rem;
            }

            .wheel-wrapper {
                width: 160px;
                height: 160px;
            }

            .wheel-value {
                font-size: 1.3rem;
            }

            .wheel-label {
                font-size: 0.7rem;
            }

            .control-panel {
                flex-direction: column;
                width: 100%;
                max-width: 250px;
            }

            .spin-button {
                width: 100%;
                padding: 0.8rem 2rem;
                font-size: 1rem;
            }

            .audio-controls {
                bottom: 10px;
                left: 10px;
                padding: 0.4rem 0.8rem;
            }

            .stats-container {
                bottom: 10px;
                right: 10px;
                padding: 0.8rem;
                font-size: 0.8rem;
            }
        }

        @media (max-width: 480px) {
            .wheel-wrapper {
                width: 140px;
                height: 140px;
            }

            .wheel-value {
                font-size: 1.1rem;
            }
        }

        @media (max-height: 700px) and (max-width: 768px) {
            .main-container {
                padding-top: 40px;
            }

            .title {
                font-size: 1.5rem;
                margin-bottom: 1rem;
            }

            .wheel-wrapper {
                width: 140px;
                height: 140px;
            }

            .sound-waves {
                height: 60px;
            }
        }

        /* Reduced Motion */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.001ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.001ms !important;
            }
        }

        /* Pulse Effect */
        .pulse {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: radial-gradient(circle, transparent, var(--neon-cyan));
            animation: pulse 2s ease-out;
            pointer-events: none;
        }

        @keyframes pulse {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            100% {
                transform: scale(2);
                opacity: 0;
            }
        }

        /* Stats Display */
        .stats-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            padding: 1rem;
            border-radius: 10px;
            border: 1px solid var(--glass-border);
            font-size: 0.9rem;
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }

        .stats-container:hover {
            opacity: 1;
        }

        /* Sound Wave Visualization */
        .sound-waves {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 80px;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            gap: 4px;
            pointer-events: none;
            z-index: 5;
        }

        .wave-bar {
            width: 4px;
            background: linear-gradient(to top, var(--neon-cyan), transparent);
            animation: wave 1s ease-in-out infinite;
            opacity: 0.3;
        }

        @keyframes wave {
            0%, 100% { height: 20px; }
            50% { height: 50px; }
        }
    </style>
</head>
<body>
    <!-- Audio Elements with multiple formats for compatibility -->
    <audio id="backgroundAudio" loop preload="auto">
        <source src="audios/background.mp3" type="audio/mpeg">
        <source src="audios/background.ogg" type="audio/ogg">
        <source src="audios/background.wav" type="audio/wav">
    </audio>
    <audio id="spinAudio" preload="auto">
        <source src="audios/spin.mp3" type="audio/mpeg">
        <source src="audios/spin.ogg" type="audio/ogg">
        <source src="audios/spin.wav" type="audio/wav">
    </audio>
    <audio id="tensionAudio" loop preload="auto">
        <source src="audios/tension.mp3" type="audio/mpeg">
        <source src="audios/tension.ogg" type="audio/ogg">
        <source src="audios/tension.wav" type="audio/wav">
    </audio>
    <audio id="applaudAudio" preload="auto">
        <source src="audios/applaud.mp3" type="audio/mpeg">
        <source src="audios/applaud.ogg" type="audio/ogg">
        <source src="audios/applaud.wav" type="audio/wav">
    </audio>

    <!-- Audio Controls -->
    <div class="audio-controls muted" id="audioControls">
        <div class="audio-icon"></div>
        <span>Sound</span>
    </div>

    <!-- Background Elements -->
    <div class="background-container">
        <div class="gradient-bg"></div>
        <div class="neon-grid"></div>
        <div class="particles" id="particles"></div>
    </div>

    <!-- Sound Waves -->
    <div class="sound-waves" id="soundWaves"></div>

    <!-- Main Content -->
    <div class="main-container">
        <h1 class="title">GLÜCKSRAD DELUXE</h1>

        <div class="wheels-container">
            <!-- Number Wheel -->
            <div class="wheel-wrapper">
                <div class="wheel" id="numberWheel">
                    <div class="wheel-face">
                        <div class="wheel-content">
                            <div class="wheel-label">Anzahl</div>
                            <div class="wheel-value" id="numberValue">?</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Name Wheel -->
            <div class="wheel-wrapper">
                <div class="wheel" id="nameWheel">
                    <div class="wheel-face">
                        <div class="wheel-content">
                            <div class="wheel-label">Name</div>
                            <div class="wheel-value" id="nameValue">?</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="control-panel">
            <button class="spin-button" id="spinBoth">Beide drehen!</button>
        </div>
    </div>

    <!-- Result Overlay -->
    <div class="result-overlay" id="resultOverlay">
        <div class="result-content">
            <h2 class="result-title">GEWINNER!</h2>
            <div class="result-details">
                <span class="result-name" id="resultName"></span>
                <span class="result-strokes"><span id="resultNumber"></span> Striche</span>
            </div>
            <div class="result-phrase" id="resultPhrase"></div>
        </div>
    </div>

    <!-- Confetti Container -->
    <div class="confetti-container" id="confettiContainer"></div>

    <!-- Stats Display -->
    <div class="stats-container">
        <div>Spins: <span id="spinCount">0</span></div>
    </div>

    <script>
        // Game Data
        const names = [
            "Ferdinand I (Reytschack)", 
            "Jonas von der Feuerwehr", 
            "Johannes B. Beeten", 
            "Enno aus Köln", 
            "Rolls Royce Robert", 
            "Ferdinand II (Henze)", 
            "Fréddé", 
            "Jakob II (Alberts)", 
            "Frisch", 
            "Ole", 
            "Kalle", 
            "Maxi", 
            "S.M. Max I", 
            "Leonard Wehrmeister", 
            "Michi von der Feuerwehr", 
            "Fabi der Schnelle",
            "Anselm",
            "Eicker",
            "Heinrich"
        ];

        // Short versions for display during spinning
        const shortNames = [
            "Oberleutnant",
            "Leutnant",
            "Spieß",
            "Enno",
            "Robert",
            "Henze",
            "Fredde",
            "Jakob A.",
            "Seppel",
            "Jakob O.",
            "Kalle",
            "Maxi",
            "S.M. Max",
            "Lennart",
            "Michi",
            "Fabi",
            "Anselm",
            "Eicker",
            "Heinrich"
        ];

        const phrases = [
            "Wow, du bist so unglaublich talentiert.",
            "Herzlichen Glückwunsch! Deine Fähigkeit, alle anderen zu überraschen, ist wirklich beeindruckend.",
            "Bravo! Deine Leistung ist wirklich außergewöhnlich.",
            "Ein Meister ist geboren!",
            "Du hast es geschafft, allen anderen zu beweisen, dass du immer im Mittelpunkt stehen kannst.",
            "Großartig! Deine Fähigkeiten sind bewundernswert.",
            "Hervorragend! Du bist wie ein lebendiger Beweis dafür, dass nicht alles auf der Welt schlecht ist.",
            "Warum so wenig?",
            "Nochmal!!!",
            "Mehr, mehr, mehr …",
            "Herrlich!",
            "Gratulation! Du bist der wahre Held der unerwarteten Wendungen.",
            "Ein weiterer Höhepunkt in deiner Karriere bei den Rheinfallspinseln.",
            "Fantastisch!",
            "Wie hast du das nur geschafft?",
            "Du machst uns alle stolz.",
            "Ein wahrer Glückspilz.",
            "Hochmut kommt vor dem Fall.",
            "Das ist fair.",
            "Super! Deine Eltern wären stolz auf dich.",
            "Kaum zu glauben.",
            "Sensationell! Das Glücksrad hat einen würdigen Champion gefunden.",
            "Die Sterne haben sich für dich ausgerichtet – oder war es nur Zufall?",
            "Beeindruckend! Fast so gut wie letztes Mal.",
            "Du hast gewonnen! Die anderen hatten eh keine Chance.",
            "Phänomenal! Das muss gefeiert werden – aber nicht zu lange.",
            "Ein historischer Moment für die Chroniken der Rheinfallspinsel!",
            "Unglaublich! Niemand hätte das vorhersehen können. Wirklich niemand.",
            "Das Schicksal hat gesprochen – und es mag dich anscheinend.",
            "Respekt! Du hast das Unmögliche möglich gemacht: Du hast gewonnen.",
            "Legendär! Dieser Moment wird in die Geschichte eingehen. Vielleicht.",
            "Du bist der Auserwählte! Zumindest für die nächsten Sekunden.",
            "Triumphierend! Wie ein Phönix aus der Asche – nur weniger dramatisch.",
            "Das war ja klar! Also eigentlich nicht, aber jetzt schon.",
            "Meisterhaft! Du hast das Rad bezwungen – es hatte keine Chance.",
            "Glückwunsch! Die Wahrscheinlichkeit war auf deiner Seite. Diesmal.",
            "Episch! Wie eine Sage aus alten Zeiten, nur aktueller.",
            "Du hast es allen gezeigt! Wobei \"es\" noch zu definieren wäre.",
            "Brilliant! Deine Strategie hat sich ausgezahlt. Welche Strategie?",
            "Unfassbar! Das hätte auch anders ausgehen können. Ist es aber nicht.",
            "Der Olymp ruft nach dir! Oder war das nur der Applaus?",
            "Majestätisch! Wie ein König auf seinem Thron. Nur ohne Thron.",
            "Das war dein Moment! Genieße ihn, er kommt so schnell nicht wieder.",
            "Überragend! Die anderen können einpacken. Wortwörtlich.",
            "Du bist ein Naturtalent! Die Natur ist manchmal seltsam.",
            "Grandios! Fast so gut wie der Gewinner von vorhin.",
            "Das Universum hat entschieden – du warst die beste Option.",
            "Spektakulär! Wie ein Feuerwerk, nur leiser.",
            "Du hast Geschichte geschrieben! Eine sehr kurze Geschichte.",
            "Bemerkenswert! Das werden wir so schnell nicht vergessen. Oder doch?",
            "Ein Geniestreich! Einstein wäre beeindruckt. Oder verwirrt.",
            "Du bist der Held des Tages! Der Tag ist aber noch jung.",
            "Fulminant! Wie ein Gewitter im Wasserglas.",
            "Das war Schicksal! Oder einfach nur Mathematik.",
            "Atemberaubend! Wir schnappen alle nach Luft.",
            "Du hast es verdient! Sagen zumindest die Regeln.",
            "Kolossal! Wie David gegen Goliath, nur ohne Kampf.",
            "Ein Meisterwerk der Glückskunst!",
            "Donnerwetter! Zeus himself wäre neidisch.",
            "Du bist unstoppbar! Zumindest bis zum nächsten Spiel.",
            "Fabelhaft! Wie aus einem Märchen, nur realer.",
            "Das war deine Sternstunde! Sie dauert genau 60 Minuten.",
            "Überirdisch! Außerirdische würden applaudieren.",
            "Du hast das System geknackt! Es war gar nicht verschlüsselt.",
            "Monumental! Wie die Pyramiden, nur vergänglicher.",
            "Ein Volltreffer! Das Glücksrad hat dich erwählt.",
            "Sagenhaft! Barden werden Lieder über dich singen. Vielleicht.",
            "Du bist die lebende Legende! Zumindest für diesen Augenblick.",
            "Titanisch! Selbst die Titanic wäre beeindruckt.",
            "Das war Perfektion! Mit kleinen Schönheitsfehlern.",
            "Glorreicher Sieg! Die Glorie hält bis zum nächsten Dreh."
        ];

        // DOM Elements
        const numberWheel = document.getElementById('numberWheel');
        const nameWheel = document.getElementById('nameWheel');
        const numberValue = document.getElementById('numberValue');
        const nameValue = document.getElementById('nameValue');
        const spinButton = document.getElementById('spinBoth');
        const resultOverlay = document.getElementById('resultOverlay');
        const resultName = document.getElementById('resultName');
        const resultNumber = document.getElementById('resultNumber');
        const resultPhrase = document.getElementById('resultPhrase');
        const confettiContainer = document.getElementById('confettiContainer');
        const spinCount = document.getElementById('spinCount');
        const particles = document.getElementById('particles');
        const soundWaves = document.getElementById('soundWaves');
        const audioControls = document.getElementById('audioControls');

        // Audio Elements
        const backgroundAudio = document.getElementById('backgroundAudio');
        const spinAudio = document.getElementById('spinAudio');
        const tensionAudio = document.getElementById('tensionAudio');
        const applaudAudio = document.getElementById('applaudAudio');

        // Game State
        let isSpinning = false;
        let totalSpins = 0;
        let selectedName = '';
        let selectedNumber = 0;
        let selectedIndex = 0;
        let isMuted = true; // Start muted
        let applaudDuration = 0;
        let isAudioUnlocked = false;

        // Initialize Audio with cross-browser compatibility
        function initializeAudio() {
            // Set volumes
            backgroundAudio.volume = 0.3;
            spinAudio.volume = 0.5;
            tensionAudio.volume = 0.4;
            applaudAudio.volume = 0.6;

            // Get applaud duration when metadata is loaded
            applaudAudio.addEventListener('loadedmetadata', () => {
                applaudDuration = applaudAudio.duration * 1000; // Convert to milliseconds
            });

            // Audio control toggle
            audioControls.addEventListener('click', toggleAudio);
        }

        // Unlock audio on first user interaction (for Safari/iOS)
        function unlockAudio() {
            if (isAudioUnlocked) return;
            isAudioUnlocked = true;

            const audioElements = [backgroundAudio, spinAudio, tensionAudio, applaudAudio];
            audioElements.forEach(audio => {
                const playPromise = audio.play();
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        audio.pause();
                        audio.currentTime = 0;
                    }).catch(() => {});
                }
            });
        }

        function toggleAudio() {
            unlockAudio(); // Ensure audio is unlocked
            isMuted = !isMuted;
            audioControls.classList.toggle('muted', isMuted);
            
            if (isMuted) {
                backgroundAudio.pause();
                tensionAudio.pause();
                applaudAudio.pause();
            } else {
                if (!isSpinning) {
                    playAudioSafely(backgroundAudio);
                }
            }
        }

        // Safe audio playing function with promise handling
        function playAudioSafely(audio) {
            if (!audio || isMuted) return;

            audio.currentTime = 0;
            const playPromise = audio.play();

            if (playPromise !== undefined) {
                playPromise.catch(() => {});
            }
        }

        // Initialize Background Effects
        function initializeEffects() {
            // Create particles
            const particleCount = window.matchMedia('(max-width: 768px)').matches ? 25 : 50;
            for (let i = 0; i < particleCount; i++) {
                createParticle();
            }

            // Create sound wave bars
            for (let i = 0; i < 30; i++) {
                const bar = document.createElement('div');
                bar.className = 'wave-bar';
                bar.style.animationDelay = `${i * 0.05}s`;
                bar.style.height = `${Math.random() * 30 + 20}px`;
                soundWaves.appendChild(bar);
            }
        }

        function createParticle() {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.left = `${Math.random() * 100}%`;
            particle.style.animationDuration = `${Math.random() * 10 + 10}s`;
            particle.style.animationDelay = `${Math.random() * 10}s`;
            
            const colors = ['var(--neon-cyan)', 'var(--neon-magenta)', 'var(--neon-yellow)'];
            particle.style.background = colors[Math.floor(Math.random() * colors.length)];
            particle.style.boxShadow = `0 0 10px ${particle.style.background}`;
            
            particles.appendChild(particle);
        }

        // Wheel Interactions
        function addWheelInteractions(wheel) {
            wheel.addEventListener('mouseenter', () => {
                if (!isSpinning) {
                    createPulseEffect(wheel);
                }
            });

            wheel.addEventListener('click', () => {
                if (!isSpinning) {
                    spinBothWheels();
                }
            });
        }

        function createPulseEffect(wheel) {
            const pulse = document.createElement('div');
            pulse.className = 'pulse';
            wheel.querySelector('.wheel-face').appendChild(pulse);
            setTimeout(() => pulse.remove(), 2000);
        }

        // Spinning Logic
        function spinBothWheels() {
            if (isSpinning) return;
            unlockAudio(); // Ensure audio is unlocked

            isSpinning = true;
            spinButton.disabled = true;
            totalSpins++;
            spinCount.textContent = totalSpins;

            // Audio handling
            if (!isMuted) {
                backgroundAudio.pause();
                playAudioSafely(spinAudio);
                
                // Play tension audio after spin audio ends
                spinAudio.addEventListener('ended', () => {
                    if (!isMuted && isSpinning) {
                        playAudioSafely(tensionAudio);
                    }
                }, { once: true });
            }

            // Add spinning class
            numberWheel.classList.add('spinning');
            nameWheel.classList.add('spinning');

            // Random spinning duration between 5-20 seconds
            const spinDuration = Math.random() * 15000 + 5000;

            // Animate values during spin
            const valueInterval = setInterval(() => {
                numberValue.textContent = Math.floor(Math.random() * 10) + 1;
                const randomIndex = Math.floor(Math.random() * names.length);
                nameValue.textContent = shortNames[randomIndex];
            }, 100);

            // Stop spinning
            setTimeout(() => {
                clearInterval(valueInterval);
                
                // Final values
                selectedNumber = Math.floor(Math.random() * 10) + 1;
                selectedIndex = Math.floor(Math.random() * names.length);
                selectedName = names[selectedIndex];
                
                numberValue.textContent = selectedNumber;
                nameValue.textContent = shortNames[selectedIndex];
                
                // Remove spinning class
                numberWheel.classList.remove('spinning');
                nameWheel.classList.remove('spinning');
                
                // Stop tension audio
                if (!isMuted) {
                    tensionAudio.pause();
                    tensionAudio.currentTime = 0;
                }
                
                // Show result after a brief pause
                setTimeout(() => {
                    showResult();
                    isSpinning = false;
                    spinButton.disabled = false;
                }, 500);
            }, spinDuration);
        }

        // Result Display with improved audio handling
        function showResult() {
            resultName.textContent = selectedName;
            resultNumber.textContent = selectedNumber;
            resultPhrase.textContent = phrases[Math.floor(Math.random() * phrases.length)];
            
            resultOverlay.classList.add('active');
            createConfetti();
            
            // Play applaud sound with Safari compatibility
            if (!isMuted) {
                playAudioSafely(applaudAudio);
            }
            
            // Use applaud duration or fallback to 5 seconds
            const displayDuration = applaudDuration || 5000;
            
            // Auto-hide after applaud duration
            setTimeout(() => {
                resultOverlay.classList.remove('active');
                clearConfetti();
                
                // Resume background music
                if (!isMuted) {
                    applaudAudio.pause();
                    applaudAudio.currentTime = 0;
                    playAudioSafely(backgroundAudio);
                }
            }, displayDuration);
        }

        // Confetti Effect
        function createConfetti() {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff', '#ffa500', '#ff1493'];
            
            for (let i = 0; i < 100; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = `${Math.random() * 100}%`;
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = `${Math.random() * 0.5}s`;
                    confetti.style.animationDuration = `${Math.random() * 2 + 3}s`;
                    confettiContainer.appendChild(confetti);
                }, i * 10);
            }
        }

        function clearConfetti() {
            setTimeout(() => {
                confettiContainer.innerHTML = '';
            }, 3000);
        }

        // Mouse Parallax Effect
        document.addEventListener('mousemove', (e) => {
            const x = (e.clientX / window.innerWidth - 0.5) * 20;
            const y = (e.clientY / window.innerHeight - 0.5) * 20;
            
            document.querySelector('.gradient-bg').style.transform = 
                `translate(${x}px, ${y}px) rotate(${x}deg)`;
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initializeEffects();
            initializeAudio();
            addWheelInteractions(numberWheel);
            addWheelInteractions(nameWheel);
            spinButton.addEventListener('click', spinBothWheels);

            // Add the global audio unlock listener
            document.addEventListener('click', unlockAudio, { once: true });
            document.addEventListener('touchstart', unlockAudio, { once: true });
            
            // Close result overlay on click (but respect applaud duration)
            resultOverlay.addEventListener('click', () => {
                // Don't allow closing while applaud is playing
                if (!applaudAudio.paused) return;
                
                resultOverlay.classList.remove('active');
                clearConfetti();
            });
        });

        // Add keyboard support
        document.addEventListener('keydown', (e) => {
            if (e.key === ' ' && !isSpinning) {
                e.preventDefault();
                spinBothWheels();
            }
            if (e.key === 'Escape' && resultOverlay.classList.contains('active') && applaudAudio.paused) {
                resultOverlay.classList.remove('active');
                clearConfetti();
            }
        });
    </script>
</body>
</html>
